name: apax-package-name-d7b4b031
version: 0.0.0
type: lib
targets:
  - "plcsim"
  - axunit-llvm
devDependencies:
  "@ax/sdk": 1.0.175
  "@ax/ax2tia": 3.1.5
  "@simatic-ax/snippetscollection": 0.0.13
variables:
  GLOBAL_LIBRARY_PATH: "TIAPortalGlobalLibrary"
  # Variable is set in .env file Example: TIA_PORTAL_INSTALL_PATH="C:\Program Files\Siemens\Automation\Portal V18\Bin"
scripts:
  updateall:
    - apax install --update-lockfile
    - apax update --all
  cleanup:
    - echo delete artifacts
    - rm "./bin/$LIBRARY_DOCUMENTS_FOLDER" -r -f
    - rm "./bin/$GLOBAL_LIBRARY_PATH" -r -f
  convertlib:
    - echo st2tia
    - ax2tia convert -i bin/plcsim/*.lib -o "bin/$LIBRARY_DOCUMENTS_FOLDER"
  importlib:
    - |
      echo import lib
      "$TIA_PORTAL_INSTALL_PATH/Siemens.Simatic.Lang.Library.Importer.exe" -i "./bin/HandoverLibraryDocuments" -o "./bin/$GLOBAL_LIBRARY_PATH" -r
  createlib:
    - apax cleanup
    - apax build
    - apax convertlib
    - apax importlib
  publishlib:
    - apax publish --package *.apax.tgz --registry 'https://npm.pkg.github.com/'
    - rm *.apax.tgz -f
  createpackage:
    - apax build
    - apax version $1
    - apax convertlib
    - apax pack
registries:
  '@simatic-ax': 'https://npm.pkg.github.com/'
files:
  - 'README.md'
  - 'LICENSE.md'
  - 'changelog.md'
  - 'doc'
  - 'bin/HandoverLibraryDocuments'
